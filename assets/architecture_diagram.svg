<svg viewBox="0 0 800 980" xmlns="http://www.w3.org/2000/svg">
  <style>
    /* System font stack for reliability */
    .text-main { 
      fill: #F8FAFC; 
      font-family: ui-monospace, 'Cascadia Code', 'Source Code Pro', Menlo, Consolas, 'DejaVu Sans Mono', monospace; 
      font-size: 11px; 
      text-anchor: middle; 
      font-weight: 500;
    }
    .node-rect { fill: #0C0A09; stroke: #404040; stroke-width: 1.5; rx: 6; }
    
    /* Neon Glows - Using standard SVG filters for better compatibility */
    .glow-crimson { stroke: #DC143C; stroke-width: 2; filter: drop-shadow(0 0 4px #DC143C); }
    .glow-purple { stroke: #D299FF; stroke-width: 2; filter: drop-shadow(0 0 5px #D299FF); }
    
    /* Moving Scanline Animation */
    .scan-line {
      fill: #FFFFFF;
      opacity: 0.1;
      animation: scan 3s linear infinite;
    }
    @keyframes scan {
      0% { transform: translateY(-10px); opacity: 0; }
      50% { opacity: 0.15; }
      100% { transform: translateY(30px); opacity: 0; }
    }
    .path { fill: none; stroke: #404040; stroke-width: 1.5; stroke-dasharray: 4; }
    .packet { fill: #DC143C; filter: drop-shadow(0 0 3px #DC143C); animation: travel 4s linear infinite; }
    
    @keyframes travel {
      0% { offset-distance: 0%; opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% { offset-distance: 100%; opacity: 0; }
    }

    /* Mistral Thinking Pulse - Fixed Scaling */
    .thinking-pulse {
      fill: #D299FF;
      transform-origin: center;
      animation: pulse 2s ease-in-out infinite;
    }
    @keyframes pulse {
      0%, 100% { opacity: 0.15; transform: scale(1); }
      50% { opacity: 0.35; transform: scale(1.05); }
    }
  </style>

  <rect width="100%" height="100%" fill="#0C0A09" />

  <defs>
    <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
      <path d="M 40 0 L 0 0 0 40" fill="none" stroke="#404040" stroke-width="0.5" opacity="0.15"/>
    </pattern>
    <path id="p-main" d="M400 50 V360" />
    <path id="toLLM" d="M400 400 L200 440" />
    <path id="toAgent" d="M400 400 L600 440" />
  </defs>
  
  <rect width="100%" height="100%" fill="url(#grid)" />

  <circle r="3" class="packet" style="offset-path: url(#p-main); animation-delay: 0s;"/>
  <circle r="3" class="packet" style="offset-path: url(#toLLM); animation-delay: 2s;"/>
  <circle r="3" class="packet" style="offset-path: url(#toAgent); animation-delay: 2.5s;"/>

  <g class="path">
    <path d="M400 50 V360" />
    <path d="M400 400 L200 440 M400 400 V440 M400 400 L600 440" />
    <path d="M200 480 V520 M400 480 V520 M600 480 V520" />
    <path d="M200 560 Q400 620 400 650 M600 560 Q400 620 400 650 M400 560 V650" />
    <path d="M400 690 V730" />
    <path d="M400 770 V820 H200 V850 M400 820 H600 V850 M600 890 V920" />
    <path d="M125 890 V920" />
  </g>

  <g transform="translate(325, 10)">
    <rect class="node-rect" width="150" height="40" />
    <text class="text-main" x="75" y="25">Client Request</text>
  </g>

  <g transform="translate(325, 80)">
    <rect class="node-rect glow-crimson" width="150" height="40" />
    <rect class="scan-line" width="150" height="10" />
    <text class="text-main" x="75" y="25">API Server</text>
  </g>

  <g transform="translate(325, 150)">
    <rect class="node-rect glow-crimson" width="150" height="40" />
    <text class="text-main" x="75" y="25">Orchestrator</text>
  </g>
  
  <g transform="translate(325, 220)">
    <rect class="node-rect glow-crimson" width="150" height="40" />
    <rect class="scan-line" width="150" height="10" style="animation-delay: 1.5s;"/>
    <text class="text-main" x="75" y="25">WorkflowDAG</text>
  </g>

  <g transform="translate(325, 290)">
    <rect class="node-rect" width="150" height="40" />
    <text class="text-main" x="75" y="25">Task Scheduler</text>
  </g>

  <g transform="translate(125, 440)">
    <rect class="node-rect glow-purple" width="150" height="40" />
    <text class="text-main" x="75" y="25">LLM Executor</text>
  </g>
  
  <g transform="translate(325, 440)">
    <rect class="node-rect" width="150" height="40" />
    <text class="text-main" x="75" y="25">Tool Executor</text>
  </g>
  
  <g transform="translate(525, 440)">
    <rect class="node-rect glow-purple" width="150" height="40" />
    <text class="text-main" x="75" y="25">Agent Executor</text>
  </g>

  <g transform="translate(100, 520)">
    <rect class="thinking-pulse" width="200" height="40" rx="6" />
    <rect class="node-rect glow-purple" width="200" height="40" />
    <text class="text-main" x="100" y="25" style="fill: #D299FF">OpenVINO: Mistral-7B</text>
  </g>

  <g transform="translate(325, 520)">
    <rect class="node-rect" width="150" height="40" />
    <text class="text-main" x="75" y="25">External Tools</text>
  </g>
  
  <g transform="translate(525, 520)">
    <rect class="node-rect glow-purple" width="150" height="40" />
    <text class="text-main" x="75" y="25">Custom Agents</text>
  </g>

  <g transform="translate(325, 650)">
    <rect class="node-rect glow-crimson" width="150" height="40" />
    <text class="text-main" x="75" y="25">Response</text>
  </g>
  
  <g transform="translate(325, 730)">
    <rect class="node-rect" width="150" height="40" />
    <text class="text-main" x="75" y="25">State Manager</text>
  </g>

  <g transform="translate(125, 850)">
    <rect class="node-rect" width="150" height="40" />
    <text class="text-main" x="75" y="25">Memory Store</text>
  </g>
  
  <g transform="translate(525, 850)">
    <rect class="node-rect glow-purple" width="150" height="40" />
    <text class="text-main" x="75" y="25">Kafka Events</text>
  </g>
  
  <g transform="translate(525, 920)">
    <rect class="node-rect" width="150" height="40" />
    <text class="text-main" x="75" y="25">Observability</text>
  </g>

  <g transform="translate(125, 920)">
    <rect class="node-rect glow-crimson" width="150" height="40" />
    <text class="text-main" x="75" y="25">Client Response</text>
  </g>
</svg>