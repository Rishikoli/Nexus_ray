<svg width="920" height="600" viewBox="0 0 920 600" xmlns="http://www.w3.org/2000/svg">
  <!-- Solid Background -->
  <rect x="0" y="0" width="920" height="600" fill="#0c0a09" rx="12" />

  <defs>
    <style>
      @keyframes flowStep1 { 0%, 100% { opacity: 0; } 10%, 25% { opacity: 1; } }
      @keyframes flowStep2 { 0%, 25%, 100% { opacity: 0; } 30%, 45% { opacity: 1; } }
      @keyframes flowStep3 { 0%, 45%, 100% { opacity: 0; } 50%, 65% { opacity: 1; } }
      @keyframes flowStep4 { 0%, 65%, 100% { opacity: 0; } 70%, 85% { opacity: 1; } }
      @keyframes flowStep5 { 0%, 85%, 95% { opacity: 0; } 90%, 100% { opacity: 1; } }
      
      @keyframes pulse { 0%, 100% { opacity: 0.6; transform: scale(1); } 50% { opacity: 1; transform: scale(1.05); } }
      @keyframes glow { 0%, 100% { filter: drop-shadow(0 0 0px #DC143C); } 50% { filter: drop-shadow(0 0 8px #DC143C); } }
      
      .layer-label { fill: #94a3b8; font-family: Arial, sans-serif; font-size: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; }
      .box-text { fill: #fff; font-family: 'Courier New', monospace; font-size: 13px; font-weight: 600; text-anchor: middle; }
      .step-label { fill: #DC143C; font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; }
      .data-label { fill: #4ade80; font-family: Arial, sans-serif; font-size: 12px; font-style: italic; }
      
      .active-step1 { animation: pulse 3s ease-in-out infinite, glow 3s ease-in-out infinite; }
      .active-step2 { animation: pulse 3s 0.6s ease-in-out infinite, glow 3s 0.6s ease-in-out infinite; }
      .active-step3 { animation: pulse 3s 1.2s ease-in-out infinite, glow 3s 1.2s ease-in-out infinite; }
      .active-step4 { animation: pulse 3s 1.8s ease-in-out infinite, glow 3s 1.8s ease-in-out infinite; }
      .active-step5 { animation: pulse 3s 2.4s ease-in-out infinite, glow 3s 2.4s ease-in-out infinite; }
    </style>
    
    <!-- Arrow marker -->
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#DC143C" />
    </marker>
    
    <!-- Data packet -->
    <circle id="dataPacket" r="6" fill="#4ade80" opacity="0.8">
      <animate attributeName="r" values="6;8;6" dur="1s" repeatCount="indefinite"/>
    </circle>
  </defs>

  <!-- Title -->
  <text x="460" y="30" text-anchor="middle" fill="#fff" font-family="'Courier New', monospace" font-size="20px" font-weight="bold">
    Nexus Ray Architecture • Live Data Flow
  </text>

  <!-- Layer Labels -->
  <text class="layer-label" x="50" y="75">INTERFACE</text>
  <text class="layer-label" x="320" y="75">CORE ENGINE</text>
  <text class="layer-label" x="640" y="75">RUNTIME & MESSAGING</text>
  <text class="layer-label" x="320" y="285">STORAGE</text>
  <text class="layer-label" x="640" y="285">OBSERVABILITY</text>

  <!-- STEP 1: Interface Layer -->
  <g class="active-step1">
    <rect x="40" y="95" width="180" height="50" rx="8" fill="#1c1917" opacity="0.8"/>
    <text class="box-text" x="130" y="125">Nexus SDK</text>
    <rect x="40" y="165" width="180" height="50" rx="8" fill="#1c1917" opacity="0.8"/>
    <text class="box-text" x="130" y="195">FastAPI Backend</text>
  </g>

  <!-- STEP 2: Core Engine -->
  <g class="active-step2">
    <rect x="280" y="95" width="200" height="60" rx="8" fill="#1c1917" opacity="0.8"/>
    <text class="box-text" x="380" y="130">DAG Engine</text>
    <rect x="280" y="175" width="200" height="60" rx="8" fill="#1c1917" opacity="0.8"/>
    <text class="box-text" x="380" y="210">Guardrails & Scoring</text>
  </g>

  <!-- STEP 3: Runtime Layer -->
  <g class="active-step3">
    <rect x="540" y="65" width="220" height="50" rx="8" fill="#1c1917" opacity="0.8"/>
    <text class="box-text" x="650" y="95">OpenVINO LLM</text>
    <rect x="540" y="135" width="220" height="50" rx="8" fill="#1c1917" opacity="0.8"/>
    <text class="box-text" x="650" y="165">Agent Tools</text>
    <rect x="540" y="205" width="220" height="50" rx="8" fill="#1c1917" opacity="0.8"/>
    <text class="box-text" x="650" y="235">Kafka Messaging</text>
  </g>

  <!-- STEP 4: Storage Layer -->
  <g class="active-step4">
    <rect x="280" y="305" width="200" height="50" rx="8" fill="#1c1917" opacity="0.8"/>
    <text class="box-text" x="380" y="335">Vector Memory</text>
  </g>

  <!-- STEP 5: Monitoring Layer -->
  <g class="active-step5">
    <rect x="540" y="305" width="220" height="50" rx="8" fill="#1c1917" opacity="0.8"/>
    <text class="box-text" x="650" y="335">Live Event Stream</text>
    <rect x="540" y="375" width="220" height="50" rx="8" fill="#1c1917" opacity="0.8"/>
    <text class="box-text" x="650" y="405">Prometheus / Grafana</text>
  </g>

  <!-- Animated Flow Paths with Data Packets -->
  
  <!-- Step 1: User Request → SDK -->
  <g opacity="0" style="animation: flowStep1 6s ease-in-out infinite;">
    <path d="M 20,120 L 40,120" stroke="#DC143C" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
    <use href="#dataPacket" x="30" y="120"/>
    <text class="step-label" x="20" y="110">Step 1</text>
    <text class="data-label" x="20" y="140">User Request</text>
  </g>

  <!-- Step 2: SDK → DAG Engine -->
  <g opacity="0" style="animation: flowStep2 6s ease-in-out infinite;">
    <path d="M 220,120 L 280,120" stroke="#DC143C" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
    <use href="#dataPacket" x="250" y="120"/>
    <text class="step-label" x="230" y="110">Step 2</text>
    <text class="data-label" x="215" y="140">Workflow Definition</text>
  </g>

  <!-- Step 3: DAG → OpenVINO & Kafka -->
  <g opacity="0" style="animation: flowStep3 6s ease-in-out infinite;">
    <path d="M 480,125 L 540,90" stroke="#DC143C" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
    <use href="#dataPacket" x="510" y="107"/>
    <path d="M 480,205 L 540,230" stroke="#DC143C" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
    <use href="#dataPacket" x="510" y="217"/>
    <text class="step-label" x="490" y="115">Step 3</text>
    <text class="data-label" x="485" y="135">LLM Inference</text>
    <text class="data-label" x="485" y="250">Event Stream</text>
  </g>

  <!-- Step 4: Results → Vector Memory -->
  <g opacity="0" style="animation: flowStep4 6s ease-in-out infinite;">
    <path d="M 380,235 L 380,305" stroke="#DC143C" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
    <use href="#dataPacket" x="380" y="270"/>
    <text class="step-label" x="390" y="260">Step 4</text>
    <text class="data-label" x="390" y="280">Context Storage</text>
  </g>

  <!-- Step 5: Events → Monitoring -->
  <g opacity="0" style="animation: flowStep5 6s ease-in-out infinite;">
    <path d="M 650,255 L 650,305" stroke="#DC143C" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
    <use href="#dataPacket" x="650" y="280"/>
    <text class="step-label" x="660" y="270">Step 5</text>
    <text class="data-label" x="660" y="290">Metrics & Logs</text>
  </g>

  <!-- Legend -->
  <g opacity="0.8">
    <rect x="20" y="520" width="880" height="70" rx="8" fill="#1c1917" stroke="#36454F" stroke-width="2"/>
    <text x="40" y="545" fill="#DC143C" font-family="Arial" font-size="14px" font-weight="bold">Animation Flow:</text>
    <text x="40" y="565" fill="#94a3b8" font-family="Arial" font-size="12px">
      1. User submits workflow → 2. DAG compiles tasks → 3. OpenVINO processes with LLM, Kafka streams events
    </text>
    <text x="40" y="580" fill="#94a3b8" font-family="Arial" font-size="12px">
      4. Results stored in Vector Memory → 5. Metrics sent to monitoring dashboard • Loop repeats every 6s
    </text>
  </g>
</svg>
